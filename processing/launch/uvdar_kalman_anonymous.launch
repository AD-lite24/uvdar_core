<launch>
  <arg name="uav_name" default="$(optenv UAV_NAME uav1)"/>

  <arg name="standalone" default="false"/>

  <arg unless="$(arg standalone)" name="nodelet" value="load"/>
  <arg     if="$(arg standalone)" name="nodelet" value="standalone"/>
  <arg unless="$(arg standalone)" name="nodelet_manager" value="$(arg uav_name)_uvdar_nodelet_manager"/>
  <arg     if="$(arg standalone)" name="nodelet_manager" value=""/>

  <!-- Node Settings -->
  <arg name="output" default="screen"/>
  <arg name="proc" default="false"/>
  <arg name="calib" default="false"/>

  <arg name="debug" default="false"/>
  <arg name="visual_debug" default="false"/>
  <arg name="gui" default="true"/>
  <arg name="frame" default="$(arg uav_name)/stable_origin"/>
  <arg name="useVelocity" default="false"/>
  <arg name="output_framerate" default="10"/>
  <arg name="input_count" default="2"/>

  <arg name="indoor" default="false"/>
  <arg name="odometryAvailable" default="true"/>

  <group ns="$(arg uav_name)">


  
  <!-- <node pkg="uvdar" type="uvdar_kalman_node" name="filterUvdar" output="screen" launch-prefix="debug_roslaunch"> -->
  <node pkg="uvdar" type="uvdar_kalman_anonymous_node" name="filterUvdar" output="screen">
    <param name="uav_name" value="$(arg uav_name)" />
    <param name="output_frame" value="$(arg frame)"/>
    <!-- <param name="output_frame" value="$(arg uav_name)/fcu"/> -->
    <!-- <param name="base_footprint_frame" value="$(arg uav_name)/fcu"/> -->
    <!-- <param name="base_footprint_frame" value="uvdar_target_estim"/> -->
    <!-- <param name="sensor_timeout" value="1.0"/> -->
    <!-- <param name="odom_used" value="false"/> -->
    <!-- <param name="imu_used" value="false"/> -->
    <!-- <param name="vo_used" value="false"/> -->
    <!-- <param name="uvdar_used" value="true"/> -->
    <!-- <param name="debug" value="false"/> -->
    <!-- <param name="self_diagnose" value="false"/> -->
    <param name="useVelocity" value="$(arg useVelocity)" />
    <param name="output_framerate" value="$(arg output_framerate)" />

    <param name="indoor" value="$(arg indoor)" />
    <param name="odometryAvailable" value="$(arg odometryAvailable)" />

    <param name="input_count" value="$(arg input_count)" />

    <remap from="~measuredPoses1" to="/$(arg uav_name)/uvdar/measuredPosesL"/>
    <remap from="~measuredPoses2" to="/$(arg uav_name)/uvdar/measuredPosesR"/>

    <remap from="~filteredPoses" to="/$(arg uav_name)/uvdar/filteredPoses"/>

    <remap from="~filteredPoses/tentative" to="/$(arg uav_name)/uvdar/filteredPoses/tentative"/>

  </node>
    </group>


  <!-- </group> -->



  </launch>
